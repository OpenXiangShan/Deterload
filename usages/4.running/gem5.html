<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>GEM5 - â„ ç¡®å®šæ€§è´Ÿè½½ï¼ˆDeterloadï¼‰â„</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">ğŸ å…¥é—¨ï¼ˆGet Startedï¼‰</li><li class="chapter-item expanded "><a href="../../index.html"><strong aria-hidden="true">1.</strong> README.md</a></li><li class="chapter-item expanded affix "><li class="part-title">ğŸ“ä½¿ç”¨ï¼ˆUsagesï¼‰</li><li class="chapter-item expanded "><a href="../../usages/1.building_outputs.html"><strong aria-hidden="true">2.</strong> æ„å»ºå·¥ä½œè´Ÿè½½ï¼ˆBuilding Workloadsï¼‰</a></li><li class="chapter-item expanded "><a href="../../usages/4.running/index.html"><strong aria-hidden="true">3.</strong> è¿è¡Œå·¥ä½œè´Ÿè½½ï¼ˆRunning Workloadsï¼‰</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../usages/4.running/emulators.html"><strong aria-hidden="true">3.1.</strong> ä»¿çœŸå™¨ï¼ˆEmulatorsï¼‰</a></li><li class="chapter-item expanded "><a href="../../usages/4.running/gem5.html" class="active"><strong aria-hidden="true">3.2.</strong> GEM5</a></li><li class="chapter-item expanded "><a href="../../usages/4.running/nemu.html"><strong aria-hidden="true">3.3.</strong> NEMU</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">ğŸ–Šï¸è®¾è®¡ï¼ˆDesignsï¼‰</li><li class="chapter-item expanded "><a href="../../designs/1.overview.html"><strong aria-hidden="true">4.</strong> æ¦‚è§ˆï¼ˆOverviewï¼‰</a></li><li class="chapter-item expanded "><a href="../../designs/2.configuration_system.html"><strong aria-hidden="true">5.</strong> é…ç½®ç³»ç»Ÿï¼ˆConfiguration Systemï¼‰</a></li><li class="chapter-item expanded "><a href="../../designs/3.benchmarks/index.html"><strong aria-hidden="true">6.</strong> åŸºå‡†æµ‹è¯•ï¼ˆBenchmarksï¼‰</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../designs/3.benchmarks/openblas.html"><strong aria-hidden="true">6.1.</strong> OpenBLAS</a></li><li class="chapter-item expanded "><a href="../../designs/3.benchmarks/spec2006.html"><strong aria-hidden="true">6.2.</strong> SPEC CPU 2006</a></li></ol></li><li class="chapter-item expanded "><a href="../../designs/4.builders/index.html"><strong aria-hidden="true">7.</strong> æ„å»ºæ¡†æ¶ï¼ˆBuildersï¼‰</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../designs/4.builders/1.imgBuilder.html"><strong aria-hidden="true">7.1.</strong> é•œåƒæ„å»ºå™¨ï¼ˆImage Builderï¼‰</a></li><li class="chapter-item expanded "><a href="../../designs/4.builders/2.cptBuilder.html"><strong aria-hidden="true">7.2.</strong> åˆ‡ç‰‡æ„å»ºå™¨ï¼ˆCheckpoint Builderï¼‰</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">ğŸ—‚ï¸å‚è€ƒï¼ˆReferencesï¼‰</li><li class="chapter-item expanded "><a href="../../references/1.configurable.html"><strong aria-hidden="true">8.</strong> å¯é…å‚æ•°ï¼ˆConfigurable Argumentsï¼‰</a></li><li class="chapter-item expanded "><a href="../../references/2.benchmarks_scope.html"><strong aria-hidden="true">9.</strong> åŸºå‡†æµ‹è¯•å›´ï¼ˆBenchmarks Scopeï¼‰</a></li><li class="chapter-item expanded "><a href="../../references/3.builders_scope.html"><strong aria-hidden="true">10.</strong> æ„å»ºå™¨å›´ï¼ˆBuilders Scopeï¼‰</a></li><li class="chapter-item expanded "><a href="../../references/4.status/index.html"><strong aria-hidden="true">11.</strong> </a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">â„ ç¡®å®šæ€§è´Ÿè½½ï¼ˆDeterloadï¼‰â„</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/OpenXiangShan/Deterload" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="gem5"><a class="header" href="#gem5">GEM5</a></h1>
<p>ç”Ÿæˆçš„å·¥ä½œè´Ÿè½½ï¼ˆä¾‹å¦‚åˆ‡ç‰‡ï¼‰å¯ä»¥åœ¨å¤šä¸ªé¦™å±±å¹³å°ä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬GEM5ã€Nemuå’Œé¦™å±±RTLã€‚</p>
<p>The generated workloads (e.g. checkpoints) are compatible with multiple XiangShan platforms including GEM5, Nemu, and XiangShan RTL.</p>
<h2 id="ç”¨æ³•usage"><a class="header" href="#ç”¨æ³•usage">ç”¨æ³•ï¼ˆUsageï¼‰</a></h2>
<p>è¯·æŒ‰ç…§<a href="https://github.com/OpenXiangShan/GEM5">OpenXiangShan/GEM5</a>ä»“åº“ä¸­çš„é…ç½®æŒ‡å—è¿›è¡Œè®¾ç½®ã€‚</p>
<p>Please follow the configuration guidelines in the <a href="https://github.com/OpenXiangShan/GEM5">OpenXiangShan/GEM5</a> repository.</p>
<p>æ³¨æ„ï¼šç”Ÿæˆçš„åˆ‡ç‰‡ä¸­å·²åŒ…å«æ¢å¤ä»£ç ï¼ˆè§<code>opensbi/default.nix</code>ï¼‰ï¼Œ
å› æ­¤ä¸ç”¨è®¾ç½®$GCB_RESTORERç¯å¢ƒå˜é‡ã€‚</p>
<p>Note: The generated checkpoints has included the restorer code (see <code>opensbi/default.nix</code>),
eliminating the need to set the $GCB_RESTORER environment variable.</p>
<h2 id="æ•…éšœæ’é™¤troubleshooting"><a class="header" href="#æ•…éšœæ’é™¤troubleshooting">æ•…éšœæ’é™¤ï¼ˆTroubleshootingï¼‰</a></h2>
<p>è¯·è€ƒè™‘åœ¨<a href="https://github.com/OpenXiangShan/Deterload/issues">Deterload issues</a>ä¸­æŠ¥å‘Šä½ é‡åˆ°çš„é—®é¢˜ã€‚</p>
<p>Please consider reporting your issues in <a href="https://github.com/OpenXiangShan/Deterload/issues">Deterload issues</a>.</p>
<h3 id="difftesté”™è¯¯difftest-errors"><a class="header" href="#difftesté”™è¯¯difftest-errors">Difftesté”™è¯¯ï¼ˆDifftest Errorsï¼‰</a></h3>
<ul>
<li>
<p>è®¿é—®é¦™å±±GEM5çš„releaseé¡µé¢</p>
</li>
<li>
<p>ä¸‹è½½ç¨³å®šç‰ˆæœ¬çš„NEMU</p>
</li>
<li>
<p>è®¾ç½®ç›¸åº”çš„$GCBV_REF_SOç¯å¢ƒå˜é‡</p>
</li>
<li>
<p>Visit the XiangShan GEM5 releases page</p>
</li>
<li>
<p>Download a stable version of NEMU</p>
</li>
<li>
<p>Set the corresponding <code>$GCBV_REF_SO</code> environment variable</p>
</li>
</ul>
<h3 id="å¸¸è§è¿è¡Œæ—¶é—®é¢˜general-runtime-issues"><a class="header" href="#å¸¸è§è¿è¡Œæ—¶é—®é¢˜general-runtime-issues">å¸¸è§è¿è¡Œæ—¶é—®é¢˜ï¼ˆGeneral Runtime Issuesï¼‰</a></h3>
<ul>
<li>
<p>åœ¨gem5å‘½ä»¤å‰æ·»åŠ <code>gdb --args</code>è¿›è¡Œè°ƒè¯•</p>
</li>
<li>
<p>åœ¨æœ¬ä»“åº“æˆ–é¦™å±±GEM5ä»“åº“ä¸­æŠ¥å‘Šé—®é¢˜</p>
</li>
<li>
<p>Debug by prefixing your gem5 command with <code>gdb --args</code></p>
</li>
<li>
<p>Report issues in either this repository or the XiangShan GEM5 repository</p>
</li>
</ul>
<h3 id="éƒ¨åˆ†åˆ‡ç‰‡è¿è¡Œå¤±è´¥failures-in-some-checkpoints"><a class="header" href="#éƒ¨åˆ†åˆ‡ç‰‡è¿è¡Œå¤±è´¥failures-in-some-checkpoints">éƒ¨åˆ†åˆ‡ç‰‡è¿è¡Œå¤±è´¥ï¼ˆFailures in Some Checkpointsï¼‰</a></h3>
<p>è™½ç„¶ç›®å‰éƒ¨åˆ†åˆ‡ç‰‡å¯èƒ½åœ¨GEM5ä¸­è¿è¡Œå¤±è´¥ï¼ˆè¿™ä¸ªé—®é¢˜æ­£åœ¨è§£å†³ä¸­ï¼‰ï¼Œ
ä½†çº¦90%çš„åˆ‡ç‰‡åº”è¯¥èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œï¼Œæä¾›å¯é çš„æ€§èƒ½æŒ‡æ ‡ã€‚</p>
<p>While some checkpoints may currently fail in GEM5 (this is being addressed),
approximately 90% should execute correctly, providing reliable performance metrics.</p>
<h2 id="åˆ†æ•°è®¡ç®—score-calculation"><a class="header" href="#åˆ†æ•°è®¡ç®—score-calculation">åˆ†æ•°è®¡ç®—ï¼ˆScore Calculationï¼‰</a></h2>
<p>è¦åœ¨ä½¿ç”¨GEM5è¿è¡Œåˆ‡ç‰‡åè®¡ç®—SPEC CPU 2006åˆ†æ•°ï¼Œ
è¯·ä½¿ç”¨<a href="https://github.com/shinezyy/gem5_data_proc">gem5_data_proc</a>å·¥å…·ã€‚
ç”±äºè¯¥å·¥å…·æœ€åˆæ˜¯ä¸ºå†…éƒ¨åˆ‡ç‰‡è®¾è®¡çš„ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œä¸€äº›å°çš„è°ƒæ•´ã€‚
ä¾‹å¦‚ï¼ŒåŸºå‡†æµ‹è¯•åç§°å¯èƒ½éœ€è¦è°ƒæ•´ï¼ˆå¦‚"hmmer"æ”¹ä¸º"456.hmmer"ï¼‰ã€‚
å³ä½¿å¶å°”æœ‰åˆ‡ç‰‡è¿è¡Œå¤±è´¥ï¼Œ
è¿™ä¸ªå·¥å…·ä»ç„¶èƒ½å¤Ÿä¸ºSPEC CPU 2006æä¾›å‡†ç¡®çš„æ•´ä½“æ€§èƒ½æŒ‡æ ‡ã€‚</p>
<p>To calculate SPEC CPU 2006 scores after running the checkpoints using GEM5,
use the <a href="https://github.com/shinezyy/gem5_data_proc">gem5_data_proc</a> tool.
Minor adjustments to the tool may be necessary as it was designed for internal checkpoints.
For example, benchmark names may need adaptation (e.g., "hmmer" to "456.hmmer").
Even with occasional checkpoint failures,
this tool should provide accurate overall performance metrics for SPEC CPU 2006.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../usages/4.running/emulators.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../usages/4.running/nemu.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../usages/4.running/emulators.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../usages/4.running/nemu.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
